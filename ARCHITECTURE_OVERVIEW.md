# Legal Data Import System - Architecture Overview

## System Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CREDIT GUARDIAN AI                            â”‚
â”‚                 Legal Data Import System                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATA SOURCES                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚Local Folder â”‚  â”‚   BNB.bg    â”‚  â”‚  EUR-Lex    â”‚           â”‚
â”‚  â”‚   (PDFs,    â”‚  â”‚  (Interest  â”‚  â”‚(Directives) â”‚           â”‚
â”‚  â”‚  DOC, XLS)  â”‚  â”‚   Rates)    â”‚  â”‚             â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚  â”‚   KZP.bg    â”‚  â”‚   NSI.bg    â”‚                             â”‚
â”‚  â”‚(Complaints, â”‚  â”‚   (Macro    â”‚                             â”‚
â”‚  â”‚ Decisions)  â”‚  â”‚ Indicators) â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SCRAPER LAYER                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚              â”‚   BaseScraper (ABC)    â”‚                         â”‚
â”‚              â”‚  - fetch_raw()         â”‚                         â”‚
â”‚              â”‚  - save_to_json()      â”‚                         â”‚
â”‚              â”‚  - retry logic         â”‚                         â”‚
â”‚              â”‚  - rate limiting       â”‚                         â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                         â”‚                                        â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚          â–¼              â–¼              â–¼                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   Local      â”‚ â”‚     BNB      â”‚ â”‚   EUR-Lex    â”‚          â”‚
â”‚  â”‚   Folder     â”‚ â”‚    Rates     â”‚ â”‚              â”‚          â”‚
â”‚  â”‚   Scraper    â”‚ â”‚   Scraper    â”‚ â”‚   Scraper    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚     KZP      â”‚ â”‚     NSI      â”‚                            â”‚
â”‚  â”‚  Complaints  â”‚ â”‚    Macro     â”‚                            â”‚
â”‚  â”‚   Scraper    â”‚ â”‚   Scraper    â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   IMPORT LAYER                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚               â”‚   quick_import.py      â”‚                        â”‚
â”‚               â”‚   - Progress tracking  â”‚                        â”‚
â”‚               â”‚   - Type detection     â”‚                        â”‚
â”‚               â”‚   - Validation         â”‚                        â”‚
â”‚               â”‚   - Error handling     â”‚                        â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DATABASE LAYER                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚ LegalDocument    â”‚  â”‚  LegalArticle    â”‚                  â”‚
â”‚   â”‚ - title          â”‚  â”‚  - article_numberâ”‚                  â”‚
â”‚   â”‚ - document_type  â”‚  â”‚  - content       â”‚                  â”‚
â”‚   â”‚ - full_text      â”‚  â”‚  - chapter       â”‚                  â”‚
â”‚   â”‚ - source_url     â”‚  â”‚  - section       â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚ ConsumerCase     â”‚  â”‚ TrainingExample  â”‚                  â”‚
â”‚   â”‚ - case_number    â”‚  â”‚  - category      â”‚                  â”‚
â”‚   â”‚ - violation      â”‚  â”‚  - input_text    â”‚                  â”‚
â”‚   â”‚ - penalty        â”‚  â”‚  - expected_out  â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                  â”‚
â”‚                   SQLite: credit_guardian.db                    â”‚
â”‚                   Current: 59 documents                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MONITORING LAYER                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚      â”‚  status_check.py   â”‚    â”‚ test_local_import  â”‚         â”‚
â”‚      â”‚  - Doc counts      â”‚    â”‚ - File scanning    â”‚         â”‚
â”‚      â”‚  - Statistics      â”‚    â”‚ - Quick validation â”‚         â”‚
â”‚      â”‚  - Sample docs     â”‚    â”‚ - No DB writes     â”‚         â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Legal Files â”‚
â”‚ (Local/Web) â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Scraper   â”‚ â—„â”€â”€â”€ fetch_raw() + retry logic
â”‚   (Base)    â”‚ â—„â”€â”€â”€ rate limiting (1.5s delay)
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Extract   â”‚ â—„â”€â”€â”€ Parse HTML/PDF/CSV/Excel
â”‚   Content   â”‚ â—„â”€â”€â”€ Validate & normalize
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    JSON     â”‚ â—„â”€â”€â”€ Optional intermediate storage
â”‚   Export    â”‚ â—„â”€â”€â”€ data/*.json files
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Import    â”‚ â—„â”€â”€â”€ Type detection
â”‚   Pipeline  â”‚ â—„â”€â”€â”€ Progress tracking
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database   â”‚ â—„â”€â”€â”€ SQLAlchemy ORM
â”‚  (SQLite)   â”‚ â—„â”€â”€â”€ Transaction management
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Status    â”‚ â—„â”€â”€â”€ Query statistics
â”‚   Report    â”‚ â—„â”€â”€â”€ Validation checks
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Usage Workflow

```
1. SCAN
   â””â”€> python test_local_import.py
       â”œâ”€> Lists all files
       â”œâ”€> Shows extensions
       â””â”€> Quick validation

2. IMPORT
   â””â”€> python quick_import.py
       â”œâ”€> Scans folder
       â”œâ”€> Extracts content
       â”œâ”€> Validates data
       â”œâ”€> Saves to DB
       â””â”€> Shows progress

3. VERIFY
   â””â”€> python status_check.py
       â”œâ”€> Total count: 59
       â”œâ”€> By source: Web(24) + Local(35)
       â”œâ”€> By type: law, code, registry...
       â””â”€> Content stats

4. SCRAPE (Optional)
   â”œâ”€> BNB Rates
   â”œâ”€> EUR-Lex Directives
   â”œâ”€> KZP Complaints
   â””â”€> NSI Indicators

5. TEST AI
   â””â”€> python test_perplexity.py
       â”œâ”€> API connection
       â””â”€> Contract analysis
```

## File Organization

```
credit-guardian/
â”‚
â”œâ”€â”€ ðŸ“„ quick_import.py           â† Main import script
â”œâ”€â”€ ðŸ“„ status_check.py           â† Database status
â”œâ”€â”€ ðŸ“„ test_local_import.py      â† Import testing
â”œâ”€â”€ ðŸ“„ test_perplexity.py        â† AI testing
â”‚
â”œâ”€â”€ ðŸ“ scrapers/
â”‚   â”œâ”€â”€ ðŸ“„ __init__.py
â”‚   â”œâ”€â”€ ðŸ“„ base_scraper.py       â† Abstract base class
â”‚   â”œâ”€â”€ ðŸ“„ local_folder_scraper.py
â”‚   â”œâ”€â”€ ðŸ“„ bnb_rates_scraper.py
â”‚   â”œâ”€â”€ ðŸ“„ eur_lex_scraper.py
â”‚   â”œâ”€â”€ ðŸ“„ kzp_complaints_scraper.py
â”‚   â””â”€â”€ ðŸ“„ nsi_macro_scraper.py
â”‚
â”œâ”€â”€ ðŸ“ database/
â”‚   â”œâ”€â”€ ðŸ“„ models.py             â† Core models
â”‚   â”œâ”€â”€ ðŸ“„ legal_models.py       â† Legal-specific models
â”‚   â””â”€â”€ ðŸ“„ init_all_tables.py    â† DB initialization
â”‚
â”œâ”€â”€ ðŸ“ data/                     â† JSON exports (optional)
â”‚   â”œâ”€â”€ ðŸ“„ bnb_rates.json
â”‚   â”œâ”€â”€ ðŸ“„ eur_lex.json
â”‚   â”œâ”€â”€ ðŸ“„ kzp_data.json
â”‚   â””â”€â”€ ðŸ“„ nsi_macro.json
â”‚
â””â”€â”€ ðŸ“ docs/
    â”œâ”€â”€ ðŸ“„ LEGAL_DATA_IMPORT_GUIDE.md
    â”œâ”€â”€ ðŸ“„ QUICK_IMPORT_REFERENCE.md
    â”œâ”€â”€ ðŸ“„ IMPLEMENTATION_SUMMARY.md
    â””â”€â”€ ðŸ“„ ARCHITECTURE_OVERVIEW.md  â† This file
```

## Key Features

### ðŸ›¡ï¸ Robust Error Handling
```
Try 1 â†’ Failed â†’ Wait 1.2s â†’ Try 2 â†’ Failed â†’ Wait 2.4s â†’ Try 3
                                                              â”‚
                                                              â–¼
                                                    Log error & continue
```

### ðŸ”„ Rate Limiting
```
Request 1 â†’ Delay (1.5s + 0.0-0.4s jitter) â†’ Request 2 â†’ Delay â†’ ...
```

### ðŸ“Š Progress Tracking
```
[1/45] Processing: file1.pdf... âœ“ Saved as ID 101
[2/45] Processing: file2.docx... âœ“ Saved as ID 102
[3/45] Processing: file3.pdf... âš  Skipped (no content)
...
```

### ðŸ” Content Validation
```
File â†’ Extract â†’ Validate â†’ Process
                    â”‚
                    â”œâ”€> Length check (>20 chars)
                    â”œâ”€> Error message check
                    â””â”€> Format validation
```

## Performance Characteristics

| Operation | Speed | Notes |
|-----------|-------|-------|
| PDF extraction | ~1-2s per file | Limited to 20 pages |
| Text file read | <100ms | Direct read |
| Excel parsing | ~500ms | pandas |
| CSV parsing | ~200ms | Multiple encodings tried |
| Database insert | ~50ms | Per document |
| Web scraping | 1.5-2.0s | Rate limited |

## Database Schema

```sql
legal_documents
â”œâ”€â”€ id (PK)
â”œâ”€â”€ title
â”œâ”€â”€ document_type
â”œâ”€â”€ document_number
â”œâ”€â”€ promulgation_date
â”œâ”€â”€ effective_date
â”œâ”€â”€ full_text          â† Up to 50K chars
â”œâ”€â”€ source_url         â† file:/// or https://
â”œâ”€â”€ is_active
â”œâ”€â”€ created_at
â””â”€â”€ updated_at

legal_articles
â”œâ”€â”€ id (PK)
â”œâ”€â”€ document_id (FK)
â”œâ”€â”€ article_number
â”œâ”€â”€ content
â”œâ”€â”€ chapter
â”œâ”€â”€ section
â””â”€â”€ ...

consumer_cases
â”œâ”€â”€ id (PK)
â”œâ”€â”€ case_number
â”œâ”€â”€ violation_description
â”œâ”€â”€ penalty_amount
â””â”€â”€ ...
```

## Integration Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend   â”‚ â† Future: Display docs
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚   REST API   â”‚ â† Future: Expose data
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Database   â”‚ â† Current: Direct access
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Scrapers   â”‚ â† Current: Populate DB
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Data Sourcesâ”‚ â† Local files + Web
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Status: Production Ready âœ…

- âœ… All components implemented
- âœ… Error handling complete
- âœ… Logging configured
- âœ… Documentation comprehensive
- âœ… Tested with real data (59 documents)
- âœ… Code quality verified (PEP8)

---

**Created**: November 24, 2025  
**Version**: 1.0  
**System**: Credit Guardian AI
